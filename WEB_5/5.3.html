<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    
</head>

<body>

    <script>
        var m = [
            {
                text: 'Гуманоиды (приматные) ',
                children: [
                    {
                        text: 'Крылатые ',
                        children: [
                            {
                                text: 'Ангелы ',
                                children: []
                            },
                            {
                                text: 'Горгониды ',
                                children: []
                            },
                            {
                                text: 'Крыланы (летунги, гламы) ',
                                children: []
                            }
                        ]
                    },
                    {
                        text: 'Люди ',
                        children: [
                            {
                                text: 'Йети (снежные люди) ',
                                children: []
                            },
                            {
                                text: 'Орки ',
                                children: []
                            },
                            {
                                text: 'Тролли ',
                                children: []
                            },
                            {
                                text: 'Эльфы ',
                                children: []
                            },
                            {
                                text: 'Гномы ',
                                children: []
                            }
                        ]
                    }
                ]
            },
            {
                text: 'Полулюди ',
                children: [
                    {
                        text: 'Звероголовые ',
                        children: [
                            {
                                text: 'Минотавры ',
                                children: []
                            },
                            {
                                text: 'Кинокефалы ',
                                children: []
                            }
                        ]
                    },
                    {
                        text: 'Оборотни ',
                        children: [
                            {
                                text: 'Берендеи ',
                                children: []
                            },
                            {
                                text: 'Веры ',
                                children: []
                            },
                            {
                                text: 'Волкодлаки (вервульфы) ',
                                children: []
                            }
                        ]
                    }
                ]
            }
        ];
        function Create(m) {

            var ul = $('<ul/>')
            for (var child of m) {
                var li = $('<li/>')
                if (child.text !== undefined)
                    li.append(child.text)
                if (typeof child !== 'object')
                    li.append(child)
                else if (child.children !== undefined)
                    li.append(Create(child.children))
                li.on('click', function () {
                    $(this.firstElementChild).slideToggle(1000)
                    return false
                })
                ul.append(li)
            }
            return ul
        }
        $("body").append(Create(m))
        $("li").each(function () {
            var t = $(this).clone().children("ul").end();
            console.log("Содержание элемента:       " + t.text() + "\r\nКоличество вложенных: " + $(this).find("li").length);
        });
    </script>

</body>

</html>